---
import Layout from "../../layouts/Layout.astro";
import { getAllPosts } from "../../lib/posts";
import BlogCard from "../../components/BlogCard.astro";

const posts = getAllPosts().slice().sort((a, b) => {
  const da = a.frontmatter?.pubDate ? new Date(a.frontmatter.pubDate).getTime() : 0;
  const db = b.frontmatter?.pubDate ? new Date(b.frontmatter.pubDate).toLocaleString() : 0;
  // Sort descending (newest first)
  return (b.frontmatter?.pubDate ? new Date(b.frontmatter.pubDate).getTime() : 0) - (a.frontmatter?.pubDate ? new Date(a.frontmatter.pubDate).getTime() : 0);
});
---

<Layout title="Blog | Zander Lewis" description="Posts and updates from Zander Lewis" keywords="blog, posts, zander lewis">
  <main class="relative min-h-screen p-8">
    <div class="max-w-3xl mx-auto">
      <nav class="mb-6">
        <a href="/" class="text-sm text-gray-400 hover:text-white">← Back to home</a>
      </nav>

      <h1 class="text-4xl font-bold text-white mb-6">Blog</h1>
      <p class="text-gray-300 mb-10">Blog posts on a variety of topics.</p>

      <ul class="space-y-4">
        {posts.map((post) => (
          <BlogCard post={post} />
        ))}
      </ul>

      {posts.length === 0 && (
        <p class="text-gray-400">No posts yet. Check back soon!</p>
      )}

      <nav class="mt-6 mb-6">
        <a href="/" class="text-sm text-gray-400 hover:text-white">← Back to home</a>
      </nav>
    </div>
  </main>
</Layout>
