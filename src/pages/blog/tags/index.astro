---
import Layout from "../../../layouts/Layout.astro";
import { getAllTags } from "../../../lib/posts";

const tagMap = getAllTags();
const tags = Object.keys(tagMap).sort((a,b) => (tagMap[b] ?? 0) - (tagMap[a] ?? 0));

function tagCount(tag: string): number {
  return tagMap[tag] ?? 0;
}
---

<Layout title="Tags | Zander Lewis" description="Tags for blog posts">
  <main class="relative min-h-screen p-8">
    <div class="max-w-3xl mx-auto">
      <h1 class="text-3xl font-bold text-white mb-4">Tags</h1>
      <p class="text-gray-300 mb-6">Browse posts by tag.</p>

      <ul class="flex flex-wrap gap-3">
        {tags.map(tag => (
          <li>
            <a href={`/blog/tags/${encodeURIComponent(tag)}`} class="inline-flex items-center gap-2 px-3 py-1 bg-white/5 rounded text-gray-200 hover:bg-white/10">{tag} <span class="text-sm text-gray-400">{tagCount(tag)}</span></a>
          </li>
        ))}
      </ul>

      {tags.length === 0 && (
        <p class="text-gray-400 mt-4">No tags found.</p>
      )}
    </div>
  </main>
</Layout>
